import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

enum TipoEndereco {
    COMERCIAL, RESIDENCIAL, ENTREGA, CORRESPONDENCIAl, etc...
}

class Endereco {
    private final String cep;
    private String cidade;
    private String bairro;
    private String rua;
    private String numero;
    private TipoEndereco tipoEndereco;
    private String complemento;

    public Endereco(String cep, String cidade, String bairro, String rua, String numero, TipoEndereco tipoEndereco, String complemento) {
        this.cep = cep;
        this.cidade = cidade;
        this.bairro = bairro;
        this.rua = rua;
        this.numero = numero;
        this.tipoEndereco = tipoEndereco;
        this.complemento = complemento;
    }

    @Override
    public String toString() {
        return "Cep:" + cep + "Cidade: " + cidade + ", Bairro: " + bairro + ", Rua: " + rua + ", Número: " + numero +
                ", Tipo de Endereço: " + tipoEndereco + ", Complemento: " + complemento;
    }
}

public class CadastroDeEndereco {
    public static void main(String[] args) {
        cadastrarEnderecos();
    }

    public static void cadastrarEnderecos() {
        Scanner sc = new Scanner(System.in);
        List<Endereco> enderecos = new ArrayList<>();

        System.out.println("Cadastro de Endereços (Máximo de 5)");

        for (int i = 0; i < 5; i++) {
            System.out.println("\nCadastro do endereço " + (i + 1) + ":");
            System.out.print("Digite o CEP: ");
            String cep = sc.nextLine();
            System.out.print("Digite a cidade: ");
            String cidade = sc.nextLine();

            System.out.print("Digite o bairro: ");
            String bairro = sc.nextLine();

            System.out.print("Digite a rua: ");
            String rua = sc.nextLine();

            System.out.print("Digite o número do endereço: ");
            String numero = sc.nextLine();

            System.out.println("Escolha o tipo de endereço:");
            System.out.println("1 - Residencial");
            System.out.println("2 - Comercial");
            System.out.println("3 - Entrega");
            System.out.println("4 - Correspondência");

            int tipoEnderecoOpcao;
            while (true) {
                try {
                    tipoEnderecoOpcao = Integer.parseInt(sc.nextLine());
                    if (tipoEnderecoOpcao >= 1 && tipoEnderecoOpcao <= 4) {
                        break;
                    } else {
                        System.out.print("Opção inválida! Por favor, escolha um número entre 1 e 4: ");
                    }
                } catch (NumberFormatException e) {
                    System.out.print("Entrada inválida! Por favor, insira um número entre 1 e 4: ");
                }
            }
            int tipoEnderecoOpcao = sc.nextInt();
            sc.nextLine(); // Limpar buffer

            TipoEndereco tipoEndereco = switch (tipoEnderecoOpcao) {
                case 1 -> TipoEndereco.RESIDENCIAL;
                case 2 -> TipoEndereco.COMERCIAL;
                case 3 -> TipoEndereco.ENTREGA;
                case 4 -> TipoEndereco.CORRESPONDENCIAl;
                case 5 -> TipoEndereco.ETC;
                default -> {
                    System.out.println("Opção inválida! Definido como ETC.");
                    yield TipoEndereco.etc;
                }
            };

            String complemento = "";
            if (tipoEndereco == TipoEndereco.RESIDENCIAL) {
                System.out.println("O endereço é:");
                System.out.println("1 - Casa");
                System.out.println("2 - Condomínio");
                int tipoResidencial = sc.nextInt();
                sc.nextLine(); // Limpar buffer

                if (tipoResidencial == 1) {
                    System.out.print("Digite o complemento da casa: ");
                    complemento = sc.nextLine();
                } else if (tipoResidencial == 2) {
                    System.out.print("Digite o bloco: ");
                    String bloco = sc.nextLine();
                    System.out.print("Digite o número do apartamento: ");
                    String numeroApartamento = sc.nextLine();
                    complemento = "Bloco: " + bloco + ", Apartamento: " + numeroApartamento;
                } else {
                    System.out.println("Opção inválida! Sem complemento.");
                }
            }

            Endereco endereco = new Endereco(cidade, bairro, rua, numero, tipoEndereco, complemento);
            enderecos.add(endereco);

            System.out.println("\nEndereço cadastrado com sucesso!");
            System.out.println(endereco);

            // Perguntar se o usuário deseja continuar
            if (i < 4) { // Não perguntar na última iteração
                System.out.print("Deseja cadastrar outro endereço? (s/n): ");
                String continuar = sc.nextLine();
                if (!continuar.equalsIgnoreCase("s")) {
                    break;
                }
            }
        }

        // Salvar os endereços no arquivo
        try (BufferedWriter writer = new BufferedWriter(new FileWriter("cadastro_enderecos.txt", true))) {
            for (Endereco endereco : enderecos) {
                writer.write(endereco.toString());
                writer.newLine();
            }
            System.out.println("\nTodos os endereços foram salvos no arquivo cadastro_enderecos.txt!");
        } catch (IOException e) {
            System.out.println("Erro ao salvar as informações: " + e.getMessage());
        }

        sc.close();
    }
}
